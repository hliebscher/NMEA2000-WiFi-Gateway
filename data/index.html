<!DOCTYPE html>
<html>
    <link rel="stylesheet" href="bootstrap-reboot.min.css">
    <style>
        * {
          box-sizing: border-box;
        }
        .container {
            padding: 1em;
        }

        form {
           display: grid;
           grid-template-columns: 1fr 1fr;
           grid-gap: 4px;
        }
        label {
            grid-column: 1 / 2;
        }
 
        input,
        button {
            grid-column: 2 / 3;
        }        
        </style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NMEA Bridge</title>
</head>

<body>
    <div class="container">
    <div class="header">
        <h1>N2K - Bridge</h1>
    </div>
    <div class="body">
    <form name="allData">
        <div class="card">
            <h1>Board voltage:<span id="ADCValue">0</span></h1><br />
        </div>

        <input type="hidden" id="handleForm" name="handleForm" value="1">

        <label for="blEnabled">Bluetooth Enabled</label>
        <input type="checkbox" id="blEnabled" name="blEnabled" $blEnabled /><br>

        <label for="demoEnabled">Demo data Enabled</label>
        <input type="checkbox" id="demoEnabled" name="demoEnabled" $demoEnabled /><br>

        <label for="wifiStaEnabled">Use WIFI Station</label>
        <input type="checkbox" id="wifiStaEnabled" name="wifiStaEnabled" $wifiStaEnabled /><br>

        <label for="wifiStaHostname">WIFI Station - Hostname</label>
        <input type="text" id="wifiStaHostname" name="wifiStaHostname" value="$wifiStaHostname" /><br>

        <label for="wifiStaSsid">WIFI Station - SSID</label>
        <input type="text" id="wifiStaSsid" name="wifiStaSsid" value="$wifiStaSsid" /><br>

        <label for="wifiStaPassw">WIFI Station - Password</label>
        <input type="password" id="wifiStaPassw" name="wifiStaPassw" value="$wifiStaPassw" /><br>

        <label for="wifiApSsid">WIFI Access Point - SSID</label>
        <input type="text" id="wifiApSsid" name="wifiApSsid" value="$wifiApSsid" /><br>

        <label for="wifiApPassword">WIFI Access Point - Password</label>
        <input type="password" id="wifiApPassword" name="wifiApPassword" value="$wifiApPassword" /><br>

        <label for="wifiUdpPort">WIFI - UDP Broadcast Port</label>
        <input type="number" id="wifiUdpPort" name="wifiUdpPort" min="1025" max="66535" value="$wifiUdpPort"><br>

        <button type="button" onclick="submitForm()">Submit</button> 
        <br /><br /><br />
    </form>
    </div>
    </div>
    <script>
        function submitForm() {
            // var formElement = document.querySelector("allData");
            var formElement = document.forms.namedItem("allData");
            var formData = new FormData(formElement);
            var xhttp = new XMLHttpRequest();
            xhttp.open("POST", "submitAll", true);
            xhttp.send(formData);
        }


        setInterval(function () {
            // Call a function repetatively with 2 Second interval
            getData();
        }, 2000); //2000mSeconds update rate

        function getData() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById(
                        "ADCValue"
                    ).innerHTML = this.responseText;
                }
            };
            xhttp.open("GET", "readADC", true);
            xhttp.send();
        }
    </script>
</body>

</html>